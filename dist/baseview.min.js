!function(e){var t=function(e){return e.$el.removeClass("disable").attr("disabled",!1),e.onEnable(),e},n=function(e){return e.$el.addClass("disable").attr("disabled",!0),e.onDisable(),e},i=function(e){return e.$el.addClass("active"),e.onActivate(),e},s=function(e){return e.$el.removeClass("active"),e.onDeactivate(),e},o=function(e){return e.listenTo(e.model,"change:active",function(){e.model.get("active")===!0?i(e):s(e)}),e.listenTo(e.model,"change:disable",function(){e.model.get("disable")===!0?n(e):t(e)}),e.addListeners(),e},l=function(e){var t;if(e.undelegateEvents(),e.$el.removeData().unbind(),e.model&&e.model.off(null,null,e),e.collection&&e.collection.off(null,null,e),e.remove(),null!==e.subviews&&e.subviews.length>0){t=[].concat(e.subviews);for(var n=0;n<t.length;n++)t[n].destroy()}e.subviews=null,e.$el=null},a=function(e){var t=null;return e.model&&(t=e.model.toJSON()),e.collection&&(t.items=e.collection.toJSON()),t},r=function(e,t){return _.template(t.template,e)},u=Backbone.Model.extend({}),c=Backbone.Collection.extend({}),d=Backbone.View.extend({template:"",className:"ui-component",_parent:null,initialize:function(e){var t={active:!0,disable:!1};this.subviews=[],e.viewName&&(this.viewName=e.viewName),this.collection||(this.collection=new c),this.model||(this.model=new u),this.defaults&&(t=_.extend(t,this.defaults)),e&&e.defaults&&(t=_.extend(t,e.defaults)),t=_.extend(t,this.model.defaults),this.model.set(t),this.refresh(),o(this).onStart()},onStart:function(){},onRefresh:function(){},onDestroy:function(){},onActivate:function(){},onDeactivate:function(){},onEnable:function(){},onDisable:function(){},addListeners:function(){},destroy:function(){return this.onDestroy(),l(this),this._parent&&this._parent.removeView(this),null},refresh:function(){var e=r(a(this),this);return this.$el.html(e),this.onRefresh(),this},render:function(e,t){switch(t){case"beforebegin":this.$el.insertBefore(e);break;default:this.$el.appendTo(e)}return this},appendView:function(e){return this.collection.add(e.model),e._parent&&e._parent.removeView(e),this.hasOwnProperty("subviews")||(this.subviews=[]),this.subviews.push(e),this[e.viewName]=e,e._parent=this,e},removeView:function(e){var t=this.subviews.indexOf(e);return-1!==t&&(this.subviews.splice(t,1),delete this[e.viewName],e._parent=null),e}});e.BaseView=d}(this.App||this);